<div class="calendar-container">
    <!-- calendar -->
    <div class="calendar__block">
        <mat-calendar [selected]="selectedDate" (selectedChange)="onSelect($event)">
        </mat-calendar>
    </div>
    <!-- planned Event -->
    <div class="calendar__block planned-events">
        <p class="calendar__block--title">Planned events</p>
        <perfect-scrollbar class="scrollbar"
            *ngIf="eventsPlannedToday?.length || eventsPlannedMonth?.length || eventsPlannedLater?.length else noEvents">
            <div class="block-divider">
                <p class="calendar__block--addTitle">Today</p>

                <div *ngIf="eventsPlannedToday?.length else noEvents">
                    <div *ngFor="let item of eventsPlannedToday" class="dfsb mb8">
                        <div class="calendar__block--text">
                            <span class="date">{{item?.date | date:'dd.MM.yyyy'}}</span>
                            <span class="fw700"> {{item?.name}} </span>
                            <span class="date">({{item?.type | lowercase}} event)</span> {{item?.description}}
                        </div>
                        <div *ngIf='!getConfirm(item) && !getDecline(item)' class="dfac">
                            <div (click)="actionEvent(true,item)" class="fontColorGreen mr16 actionImg">
                                <img class="actionImg" src="../../../assets/img/okIcon.png" alt="">
                            </div>
                            <div (click)="actionEvent(false,item)" class="fontColorRed actionImg">
                                <img class="actionImg" src="../../../assets/img/close.png" alt="">
                            </div>
                        </div>
                        <div *ngIf='getConfirm(item)' [matMenuTriggerFor]="menu">
                            <span class="cursor fontColorGreen">You are going!</span>
                        </div>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item (click)="editChoose(item)">
                                <mat-icon>edit</mat-icon>
                                <span>edit choice</span>
                            </button>
                        </mat-menu>
                        <div *ngIf='getDecline(item)' [matMenuTriggerFor]="menu">
                            <span class="cursor fontColorRed">You are not going!</span>
                        </div>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item (click)="editChoose(item)">
                                <mat-icon>edit</mat-icon>
                                <span>edit choice</span>
                            </button>
                        </mat-menu>
                    </div>
                </div>

                <ng-template #noEvents>
                    <div class="calendar__block--text">
                        No events today
                    </div>
                </ng-template>
            </div>

            <div *ngIf="eventsPlannedMonth?.length" class="block-divider">
                <p class="calendar__block--addTitle">This month</p>
                <div *ngFor="let item of eventsPlannedMonth" class="dfsb mb8">
                    <div class="calendar__block--text">
                        <span class="date">{{item?.date | date:'dd.MM.yyyy'}}</span>
                        <span class="fw700"> {{item?.name}} </span>
                        <span class="date">({{item?.type | lowercase}} event)</span> {{item?.description}}
                    </div>
                    <div *ngIf='!getConfirm(item) && !getDecline(item)' class="dfac">
                        <div (click)="actionEvent(true,item)" class="fontColorGreen mr16 actionImg">
                            <img class="actionImg" src="../../../assets/img/okIcon.png" alt="">
                        </div>
                        <div (click)="actionEvent(false,item)" class="fontColorRed actionImg">
                            <img class="actionImg" src="../../../assets/img/close.png" alt="">
                        </div>
                    </div>
                    <div *ngIf='getConfirm(item)' [matMenuTriggerFor]="menu">
                        <span class="cursor fontColorGreen">You are going!</span>
                    </div>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="editChoose(item)">
                            <mat-icon>edit</mat-icon>
                            <span>edit choice</span>
                        </button>
                    </mat-menu>
                    <div *ngIf='getDecline(item)' [matMenuTriggerFor]="menu">
                        <span class="cursor fontColorRed">You are not going!</span>
                    </div>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="editChoose(item)">
                            <mat-icon>edit</mat-icon>
                            <span>edit choice</span>
                        </button>
                    </mat-menu>
                </div>
            </div>

            <div *ngIf="eventsPlannedLater?.length" class="block-divider">
                <p class="calendar__block--addTitle">Later</p>
                <div *ngFor="let item of eventsPlannedLater" class="dfsb mb8">
                    <div class="calendar__block--text">
                        <span class="date">{{item?.date | date:'dd.MM.yyyy'}}</span>
                        <span class="fw700"> {{item?.name}} </span>
                        <span class="date">({{item?.type | lowercase}} event)</span> {{item?.description}}
                    </div>
                    <div *ngIf='!getConfirm(item) && !getDecline(item)' class="dfac">
                        <div (click)="actionEvent(true,item)" class="fontColorGreen mr16 actionImg">
                            <img class="actionImg" src="../../../assets/img/okIcon.png" alt="">
                        </div>
                        <div (click)="actionEvent(false,item)" class="fontColorRed actionImg">
                            <img class="actionImg" src="../../../assets/img/close.png" alt="">
                        </div>
                    </div>
                    <div *ngIf='getConfirm(item)' [matMenuTriggerFor]="menu">
                        <span class="cursor fontColorGreen">You are going!</span>
                    </div>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="editChoose(item)">
                            <mat-icon>edit</mat-icon>
                            <span>edit choice</span>
                        </button>
                    </mat-menu>
                    <div *ngIf='getDecline(item)' [matMenuTriggerFor]="menu">
                        <span class="cursor fontColorRed">You are not going!</span>
                    </div>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="editChoose(item)">
                            <mat-icon>edit</mat-icon>
                            <span>edit choice</span>
                        </button>
                    </mat-menu>
                </div>
            </div>
        </perfect-scrollbar>
        <ng-template #noEvents>
            <div class="calendar__block--text">
                No event yet.
            </div>
        </ng-template>
    </div>
    <!-- select Event -->
    <div class="calendar__block">
        <div class="calendar__block--title">{{selectedDate | date:'dd.MM.yyyy'}}</div>
        <perfect-scrollbar *ngIf="birthSelectDate?.length || eventSelectedDate?.length else noEvents" class="scrollbar">
            <div *ngFor="let birth of birthSelectDate" class="calendar__block--text mb8">
                {{birth?.name}} <span class="date">(birthday)</span>
            </div>
            <div *ngFor="let eventToday of eventSelectedDate" class="calendar__block--text mb8">
                {{eventToday?.name}} <span class="date">({{eventToday?.type | lowercase}} event)</span>
            </div>
        </perfect-scrollbar>
        <ng-template #noEvents>
            <div class="calendar__block--text">
                No events today
            </div>
        </ng-template>
    </div>
</div>