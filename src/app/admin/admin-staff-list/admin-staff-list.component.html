<div class="admin-staff-container">
    <div class="search">

        <mat-form-field appearance="outline">
            <mat-label>Search</mat-label>
            <input matInput type="text" class="form-control" placeholder="Search by employee name..."
                (keyup)="applyFilter($event)" />
        </mat-form-field>

        <button class="btn-staffList" (click)='addUser()' mat-flat-button>
            <mat-icon>add</mat-icon>
        </button>
    </div>
    <div>

        <mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <ng-container matColumnDef="photo" class="mat-column-photo">
                <mat-header-cell *matHeaderCellDef> </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <img [src]="getEmployeePhoto(element?.id)" class="sizePhotoStaffList">
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
                <mat-cell *matCellDef="let element" class="mat-cell--name">
                    <p *ngIf="element.name && element.lastName else noName">
                        {{element?.lastName | titlecase}} {{element?.name | titlecase}} 
                    </p>
                    <ng-template #noName>
                        <p>
                            No Name
                        </p>
                    </ng-template>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="position">
                <mat-header-cell *matHeaderCellDef>Position</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p class="text-truncate-ellipsis" [matTooltip]="element?.position"
                        matTooltipClass="my-custom-tooltip">
                        <span class="mobile-view">Position: </span>{{element?.position || '&#8212;'}}
                    </p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="birthday">
                <mat-header-cell *matHeaderCellDef>Birthday</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p>
                        <span *ngIf='element?.date else noBirthDay' class="mobile-view">Birthday: </span>{{element?.date | date:"dd.MM.yyyy" || 'No info' }}
                    </p>
                    <ng-template #noBirthDay>
                        <p>
                            <span class="mobile-view">Birthday: </span> &#8212;
                        </p>
                    </ng-template>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="salary">
                <mat-header-cell *matHeaderCellDef>Salary</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p *ngIf="element?.salary else noSalary">
                        <span class="mobile-view">Salary: </span>{{element?.salary}}$
                    </p>
                    <ng-template #noSalary>
                        <p>
                            <span class="mobile-view">Salary: </span> &#8212;
                        </p>
                    </ng-template>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="firstDay">
                <mat-header-cell *matHeaderCellDef>First day</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p *ngIf="element?.startDate else noStartDate">
                        <span class="mobile-view">First day: </span>{{element?.startDate | date:"dd.MM.yyyy"}}
                    </p>
                    <ng-template #noStartDate>
                        <p>
                            <span class="mobile-view">First day: </span>No info
                        </p>
                    </ng-template>
                </mat-cell>
            </ng-container>

            <!-- <ng-container matColumnDef="lastPerf">
                <mat-header-cell *matHeaderCellDef>Last Performance</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p *ngIf="element?.lastPerf else noStartDate">
                        <span class="mobile-view">Last Performance: </span>{{element?.lastPerf | date:"dd.MM.yyyy"}}
                    </p>
                    <ng-template #noStartDate>
                        <p>
                            <span class="mobile-view">Last Performance: </span>No info
                        </p>
                    </ng-template>
                </mat-cell>
            </ng-container> -->

            <ng-container matColumnDef="phone">
                <mat-header-cell *matHeaderCellDef>Phone</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p>
                        <span class="mobile-view">Phone: </span>{{element?.phone || '&#8212;'}}
                    </p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="email">
                <mat-header-cell *matHeaderCellDef>Email</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p class="text-truncate-ellipsis" [matTooltip]="element?.email" matTooltipClass="my-custom-tooltip">
                        <span class="mobile-view">Email: </span>{{element?.email || '&#8212;'}}
                    </p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="skype">
                <mat-header-cell *matHeaderCellDef>Skype</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p class="text-truncate-ellipsis" [matTooltip]="element?.skype" matTooltipClass="my-custom-tooltip">
                        <span class="mobile-view">Skype: </span>{{element?.skype || '&#8212;'}}
                    </p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="vacation">
                <mat-header-cell *matHeaderCellDef>Vacation</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p>
                        <span class="mobile-view">Vacation: </span>{{getVacationEmployee(element.id) || '&#8212;'}}
                    </p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="sickLeave">
                <mat-header-cell *matHeaderCellDef>Sick leave</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <p>
                        <span class="mobile-view">Sick Leave: </span>{{getSickLeaveEmployee(element.id) || '&#8212;'}}
                    </p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="about">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <button (click)="aboutUser(element)" class="underline">
                        <p>about</p>
                    </button>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="cv">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <button (click)="getCV(element)" class="underline">
                        <p>CV</p>
                    </button>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="changeLog">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <button (click)="editUser(element)" class="underline">
                        <p>change log</p>
                    </button>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
        <mat-paginator #paginator [pageSize]="10" [pageSizeOptions]="[2, 4, 6, 8, 10]"
            showFirstLastButtons>
        </mat-paginator>
    </div>