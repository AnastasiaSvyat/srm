<div class="admin-dashboard-container">
    <div class="admin-dashboard-grid">
        <!-- admin -->
        <div class="admin-dashboard-grid__block block-admin">
            <div class="dfac">
                <img class="photoHeader mr24" [src]=" urlPhoto ? urlPhoto : '../../../assets/img/nouser.jpeg'" alt="">
                <div class="admin-dashboard-grid__block--title mb0">
                    {{employee?.name}} {{employee?.lastName}}
                </div>
            </div>
            <div class="admin-dashboard-grid__block--text">
                <span class="admin-dashboard-grid__block--addTitle">Phone:</span> {{employee?.phone}}
            </div>
            <div class="admin-dashboard-grid__block--text">
                <span class="admin-dashboard-grid__block--addTitle">Email:</span> {{employee?.email}}
            </div>
            <div class="admin-dashboard-grid__block--text">
                <span class="admin-dashboard-grid__block--addTitle">Birthday:</span> {{employee?.date | date:
                'dd.MM.yyyy'}}
            </div>
            <button class="btn-dashboard btn-tr-corner" (click)="editUser(employee)" mat-flat-button>
                <mat-icon>more_horiz</mat-icon>
            </button>
        </div>
        <!-- todo list -->
        <div class="admin-dashboard-grid__block block-todo">
            <div class="dffssb">
                <div class="admin-dashboard-grid__block--title">Todo list</div>
                <button (click)='addTask()' class="btn-dashboard" mat-flat-button>
                    <mat-icon>add</mat-icon>
                </button>
            </div>
            <perfect-scrollbar
                *ngIf="toDoListWeek?.length || toDoListToday?.length || toDoListTomorrow?.length else noTasks"
                class="scrollbar">
                <div *ngIf="toDoListToday?.length" class="block-divider">
                    <div class="admin-dashboard-grid__block--addTitle">
                        Today
                    </div>
                    <div *ngFor="let task of toDoListToday;" class="list-item--withMenu">
                        <mat-checkbox type='checkbox' [checked]="task.select" (change)="onChange($event,task)">
                            <span [ngClass]="task.select ? 'active' : ''">{{task?.task}}</span>
                        </mat-checkbox>
                        <button mat-icon-button [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button (click)="updateTask(task)" mat-menu-item>
                                <mat-icon>edit</mat-icon>
                                <span>Edit</span>
                            </button>
                            <button (click)="deleteTask(task)" mat-menu-item>
                                <mat-icon>delete</mat-icon>
                                <span>Delete</span>
                            </button>
                        </mat-menu>
                    </div>
                </div>
                <div *ngIf="toDoListTomorrow?.length" class="block-divider">
                    <div class="admin-dashboard-grid__block--addTitle">Tomorrow</div>
                    <div *ngFor="let task of toDoListTomorrow;" class="list-item--withMenu">
                        <mat-checkbox type='checkbox' [checked]="task.select" (change)="onChange($event,task)">
                            <span [ngClass]="task.select ? 'active' : ''">{{task?.task}}</span>
                        </mat-checkbox>
                        <div>
                            <button mat-icon-button [matMenuTriggerFor]="menu">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button (click)="updateTask(task)" mat-menu-item>
                                    <mat-icon>edit</mat-icon>
                                    <span>Edit</span>
                                </button>
                                <button (click)="deleteTask(task)" mat-menu-item>
                                    <mat-icon>delete</mat-icon>
                                    <span>Delete</span>
                                </button>
                            </mat-menu>
                        </div>
                    </div>
                </div>
                <div *ngIf="toDoListWeek?.length" class="block-divider">
                    <div class="admin-dashboard-grid__block--addTitle">
                        This week
                    </div>
                    <div *ngFor="let task of toDoListWeek" class="list-item--withMenu">
                        <mat-checkbox type='checkbox' [checked]="task.select" (change)="onChange($event,task)">
                            <span [ngClass]="task.select ? 'active' : ''">{{task?.task}}</span><span class="date">
                                ({{task?.date | date:'dd.MM.yyyy'}})</span>
                        </mat-checkbox>
                        <div>
                            <button mat-icon-button [matMenuTriggerFor]="menu">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button (click)="updateTask(task)" mat-menu-item>
                                    <mat-icon>edit</mat-icon>
                                    <span>Edit</span>
                                </button>
                                <button (click)="updateTask(task)" mat-menu-item>
                                    <mat-icon>delete</mat-icon>
                                    <span>Delete</span>
                                </button>
                            </mat-menu>
                        </div>
                    </div>
                </div>
            </perfect-scrollbar>
            <ng-template #noTasks>
                <div class="admin-dashboard-grid__block--text center">No tasks</div>
            </ng-template>
        </div>
        <!-- Events -->
        <div class="admin-dashboard-grid__block block-events">
            <div class="dffssb">
                <div class="admin-dashboard-grid__block--title">Events</div>
                <button (click)='addEvent()' class="btn-dashboard" mat-flat-button>
                    <mat-icon>add</mat-icon>
                </button>
            </div>
            <perfect-scrollbar
                *ngIf="eventLaterList?.length || eventDayList?.length || eventMonthList?.length else noEvents"
                class="scrollbar">
                <div *ngIf="eventDayList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">Today</p>
                    <div *ngIf="eventDayList?.length">
                        <div *ngFor="let item of eventDayList" class="list-item--withMenu">
                            <div>{{item?.name}}<span class="date">({{item?.date | date:'dd.MM.yyyy'}})</span></div>
                            <div>
                                <button mat-icon-button [matMenuTriggerFor]="menu">
                                    <mat-icon>more_vert</mat-icon>
                                </button>
                                <mat-menu #menu="matMenu">
                                    <button (click)="descriptionEvent(item)" mat-menu-item>
                                        <mat-icon>description</mat-icon>
                                        <span>Description</span>
                                    </button>
                                    <button (click)="updateEvent(item)" mat-menu-item>
                                        <mat-icon>edit</mat-icon>
                                        <span>Edit</span>
                                    </button>
                                    <button (click)="deleteEvent(item)" mat-menu-item>
                                        <mat-icon>description</mat-icon>
                                        <span>Delete</span>
                                    </button>
                                </mat-menu>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="eventMonthList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">This month</p>
                    <div *ngFor="let item of eventMonthList" class="list-item--withMenu">
                        <div>{{item?.name}}<span class="date">({{item?.date | date:'dd.MM.yyyy'}})</span></div>
                        <button mat-icon-button [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button (click)="descriptionEvent(item)" mat-menu-item>
                                <mat-icon>description</mat-icon>
                                <span>Description</span>
                            </button>
                            <button (click)="updateEvent(item)" mat-menu-item>
                                <mat-icon>edit</mat-icon>
                                <span>Edit</span>
                            </button>
                            <button (click)="deleteEvent(item)" mat-menu-item>
                                <mat-icon>delete</mat-icon>
                                <span>Delete</span>
                            </button>
                        </mat-menu>
                    </div>
                </div>
                <div *ngIf="eventLaterList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">Later</p>
                    <div *ngFor="let item of eventLaterList" class="list-item--withMenu">
                        <div>{{item?.name}}<span class="date">({{item?.date | date:'dd.MM.yyyy'}})</span></div>
                        <div>
                            <button mat-icon-button [matMenuTriggerFor]="menu">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button (click)="descriptionEvent(item)" mat-menu-item>
                                    <mat-icon>delete</mat-icon>
                                    <span>Description</span>
                                </button>
                                <button (click)="updateEvent(item)" mat-menu-item>
                                    <mat-icon>edit</mat-icon>
                                    <span>Edit</span>
                                </button>
                                <button (click)="deleteEvent(item)" mat-menu-item>
                                    <mat-icon>delete</mat-icon>
                                    <span>Delete</span>
                                </button>
                            </mat-menu>
                        </div>
                    </div>
                </div>
            </perfect-scrollbar>
            <ng-template #noEvents>
                <div class="admin-dashboard-grid__block--text center">No events</div>
            </ng-template>
        </div>
        <!-- Birthdays -->
        <div class="admin-dashboard-grid__block block-birthdays block-birthdays">
            <div class="admin-dashboard-grid__block--title">Birthdays</div>
            <perfect-scrollbar class="scrollbar">
                <div *ngIf="todayBirthList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">Today</p>
                    <div *ngFor="let item of todayBirthList" class="list-item">
                        <img class="photo photoSmall mr8" [src]="getEmployeePhotoById(item.id)">
                        <div>
                            {{item?.name}} {{item?.lastName}}<span class="date">({{item?.date |
                                date:'dd.MM.yyyy'}})</span>
                        </div>
                    </div>
                </div>
                <div *ngIf="monthBirthList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">This month</p>
                    <div *ngFor="let item of monthBirthList" class="list-item">
                        <img class="photo photoSmall mr8" [src]="getEmployeePhotoById(item.id)">
                        <div>
                            {{item?.name}} {{item?.lastName}}<span class="date">({{item?.date |
                                date:'dd.MM.yyyy'}})</span>
                        </div>
                    </div>
                </div>
                <div *ngIf="staffBirthLater?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">Later</p>
                    <div *ngFor="let item of staffBirthLater" class="list-item">
                        <img class="photo photoSmall mr8" [src]="getEmployeePhotoById(item.id)">
                        <div>
                            {{item?.name}} {{item?.lastName}}<span class="date">({{item?.date |
                                date:'dd.MM.yyyy'}})</span>
                        </div>
                    </div>
                </div>
            </perfect-scrollbar>
        </div>
        <!-- Vacations -->
        <div class="admin-dashboard-grid__block block-vacations">
            <div class="admin-dashboard-grid__block--title">Vacations</div>
            <perfect-scrollbar *ngIf="vacationMonthList?.length && vacationLaterList?.length else noVacations"
                class="scrollbar">
                <div *ngIf="vacationMonthList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">This month</p>
                    <div *ngFor="let item of vacationMonthList" class="list-item">
                        <img class="photo photoSmall mr8" [src]="getEmployeePhotoById(item.idEmployee)">
                        <div>{{getEmployeeName(item.idEmployee)}}</div>
                        <div>{{item?.name}}</div>
                        <div class="date">({{item?.date | date:'dd.MM.yyyy'}} - {{item?.endDate | date:'dd.MM.yyyy'}})
                        </div>
                    </div>
                </div>
                <div *ngIf="vacationLaterList?.length" class="block-divider">
                    <p class="admin-dashboard-grid__block--addTitle">Later</p>
                    <div *ngFor="let item of vacationLaterList" class="list-item">
                        <img class="photo photoSmall mr8" [src]="getEmployeePhotoById(item.idEmployee)">
                        <div>{{getEmployeeName(item.idEmployee)}}</div>
                        <div>{{item?.name}}</div>
                        <div class="date">({{item?.date | date:'dd.MM.yyyy'}} - {{item?.endDate | date:'dd.MM.yyyy'}})
                        </div>
                    </div>
                </div>
            </perfect-scrollbar>
            <ng-template #noVacations>
                <div class="admin-dashboard-grid__block--text center">No vacations yet</div>
            </ng-template>
        </div>
    </div>
</div>